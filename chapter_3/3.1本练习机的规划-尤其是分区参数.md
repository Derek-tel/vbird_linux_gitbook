# 3.1 本练习机的规划--尤其是分区参数

读完[主机规划与磁盘分区章节]之后，相信你对于安装 Linux 之前要作的事情已经有基本的概念了。唔！并没有读第二章...千万不要这样跳着读，赶紧回去念一念第二章， 了解一下安装前的各种考虑对你Linux的学习会比较好啦！

如果你已经读完第二章了，那么下面就实际针对第二章的介绍来一一规划我们所要安装的练习机了吧！ 请大家注意唷，我们后续的章节与本章的安装都有相关性，所以，请务必要了解到我们这一章的作法喔！

-   Linux主机的角色定位： 本主机架设的主要目的在于练习Linux的相关技术，所以几乎所有的数据都想要安装进来。 因此连较耗系统资源的X Window System也必须要包含进来才行。

-   选择的distribution： 由于我们对于Linux的定位为“服务器”的角色，因此选择号称完全相容于商业版RHEL的社群版本， 就是CentOS 7.x版啰。请回到[2.3.1 章]去获得下载的信息吧！ ^\_^。

-   计算机系统硬件配备： 由于虚拟机越来越流行，因此鸟哥这里使用的是 Linux 原生的 KVM 所搭建出来的虚拟硬件环境。对于 Linux 还不熟的朋友来说， 建议你使用[2.4 章]提到的 virtualbox 来进行练习吧！ 至于鸟哥使用的方式可以参考文末的延伸阅读，里面有许多的文件可参考 鸟哥的虚拟机硬件配备如下：
    -   CPU等级类别： 通过 Linux 原生的虚拟机管理员的处理，使用本机的 CPU 类型。本机 CPU 为 Intel i7 2600 这颗三、四年前很流行的 CPU 喔！ 至于芯片组则是 KVM 自行设置的喔！
    -   内存： 通过虚拟化技术提供大约 1.2G 左右的内存
    -   硬盘： 使用一颗 40GB 的 VirtI/O 芯片组的磁盘，因此磁盘文件名应该会是 /dev/vda 才对。同时提供一颗 2GB 左右的 IDE 界面的磁盘， 这颗磁盘仅是作为测试之用，并不安装系统！因此还有一颗 /dev/sda 才对喔！
    -   网卡： 使用 bridge （桥接） 的方式设置了对外网卡，网卡同样使用 VirtI/O 的芯片，还好 CentOS 本身就有提供驱动程序， 所以可以直接抓到网卡喔！
    -   显卡（VGA）： 使用的是在 Linux 环境下运行还算顺畅的 QXL 显卡，给予 60M 左右的显示内存。
    -   其他输入/输出设备： 还有仿真光驱、USB鼠标、USB键盘以及 17 英寸屏幕输出等设备喔！

-   磁盘分区的配置 在第二章里面有谈到 MBR 与 GPT 磁盘分区表配置的问题，在目前的 Linux 环境下， 如果你的磁盘没有超过 2TB 的话，那么 Linux 默认是会以 MBR 模式来处理你的分区表的。由于我们仅切出 40GB 的磁盘来玩， 所以默认上会以 MBR 来配置！这鸟哥不喜欢！因为就无法练习新的环境了～因此，我们得在安装的时候加上某些参数， 强迫系统使用 GPT 的分区表来配置我们的磁盘喔！而预计实际分区的情况如下：

    | 所需目录/设备 | 磁盘容量 | 文件系统 | 分区格式 | 
    | --- | --- | --- | --- | 
    | BIOS boot | 2MB | 系统自订 | 主分区 |
    | /boot | 1GB | xfs | 主分区 | 
    | / | 10GB | xfs | LVM 方式 | 
    | /home | 5GB | xfs | LVM 方式 | 
    | swap | 1GB | swap | LVM 方式 |

    由于使用 GPT 的关系，因此根本无须考虑主/延伸/逻辑分区的差异。不过，由于 CentOS 默认还是会使用 LVM 的方式来管理你的文件系统， 而且我们后续的章节也会介绍如何管理这东西，因此，我们这次就使用 LVM 管理机制来安装系统看看！

-   开机管理程序（boot loader）： 练习机的开机管理程序使用CentOS 7.x默认的grub2软件，并且安装到MBR上面。 也必须要安装到MBR上面才行！因为我们的硬盘是全部用在Linux上面的啊！ ^\_^

-   选择软件： 我们预计这部练习机是要作为服务器用的，同时可能会用到图形接口来管理系统，因此使用的是“含有 X 接口的服务器软件”的软件方式来安装喔！ 要注意的是，从 7.x 开始，默认选择的软件模式会是最小安装！所以千万记得软件安装时，要特别挑选一下才行！

-   检查表单： 最后，你可以使用下面的表格来检查一下，你要安装的数据与实际的硬件是否吻合喔：

   
    | 是与否，或详细信息 | 细部项目 |
    | --- | --- |
    | 是, DVD版 | 01\. 是否已下载且烧录所需的Linux distribution？（DVD或CD） |
    | CentOS 7.1, x64 | 02\. Linux distribution的版本为何？（如CentOS 7.1 x86_64版本） |
    | x64 | 03\. 硬件等级为何（如i386, x86_64, SPARC等等，以及DVD/CD-ROM） |
    | 是, 均为x86_64 | 04\. 前三项安装媒体/操作系统/硬件需求，是否吻合？ |
    | 是 | 05\. 硬盘数据是否可以全部被删除？ |
    | 已确认分区方式 | 06\. Partition是否做好确认（包括/与swap等容量） |
    | | 硬盘数量: 1颗40GB硬盘，并使用 GPT 分区表 <br>BIOS boot （2MB） <br>/boot （1GB） <br>/ （10GB） <br>/home （5GB） <br>swap （1GB） |
    | 有，使用 VirtI/O | 07\. 是否具有特殊的硬件设备（如SCSI磁盘阵列卡等） |
    | CentOS 已内置 | 08\. 若有上述特殊硬件，是否已下载驱动程序？ |
    | grub2, MBR | 09\. 开机管理程序与安装的位置为何？ |
    | 未取得IP参数 | 10\. 网络信息（IP参数等等）是否已取得？ |
    | | 未取得IP的情况下，可以套用如下的IP参数：<br>是否使用DHCP：无 <br>IP:192.168.1.100 <br>子网掩码：255.255.255.0 <br>主机名称：study.centos.vbird |
    | Server with X | 11\. 所需要的软件有哪些？ |


    如果上面表单确认过都没有问题的话，那么我们就可以开始来安装咱们的CentOS 7.x x86*64版本啰！ ^*^
